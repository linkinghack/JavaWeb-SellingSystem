package com.linkinghack.SellingSystem.service;import com.linkinghack.SellingSystem.dao.mappers.PersonMapper;import com.linkinghack.SellingSystem.dao.mappers.ProductMapper;import com.linkinghack.SellingSystem.dao.mappers.TrxMapper;import com.linkinghack.SellingSystem.meta.Buy;import com.linkinghack.SellingSystem.meta.Product;import com.linkinghack.SellingSystem.meta.Trx;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.Date;import java.util.List;/** * Created by linking on 16-7-11. */@Servicepublic class BuyerService {    @Autowired    private TrxMapper trxMapper;    @Autowired    private ProductMapper productMapper;    @Autowired    private PersonMapper personMapper;    public void buyProduct(int buyerId,int contentId,int num){        long price = productMapper.getProduct(contentId).getPrice();        long time = new Date().getTime();        trxMapper.trxIn(buyerId,contentId,price,time,num);    }    public List<Trx> getBuyList(String userName){        int personId = personMapper.getUserIdByName(userName);        List<Trx> trxs = null;        try {            trxs = trxMapper.trxOutByPersonId(personId);            for (Trx trx:trxs) {                trx.setTitle(productMapper.getProduct(trx.getContentId()).getTitle());                trx.setIcon(productMapper.getProduct(trx.getContentId()).getIcon());                trx.setTotal(trx.getNum()*trx.getPrice());            }        }catch(Exception e){            e.printStackTrace();        }        return trxs;    }}